/*!
 *  @preserve
 *  
 *  @module      iframe-resizer/child 5.5.0 (iife) 
 *
 *  @license     GPL-3.0 for non-commercial use only.
 *               For commercial use, you must purchase a license from
 *               https://iframe-resizer.com/pricing
 * 
 *  @description Keep same and cross domain iFrames sized to their content 
 *
 *  @author      David J. Bradshaw <info@iframe-resizer.com>
 * 
 *  @see         {@link https://iframe-resizer.com}
 * 
 *  @copyright  (c) 2013 - 2025, David J. Bradshaw. All rights reserved.
 */


!function(){"use strict";const e="font-weight: normal;",t="font-weight: bold;",n="font-style: italic;",o=e+n,r="default",i=Object.freeze({assert:!0,error:!0,warn:!0}),a={expand:!0,defaultEvent:void 0,event:void 0,label:"AutoConsoleGroup",showTime:!0},s={profile:0,profileEnd:0,timeStamp:0,trace:0},l=Object.assign(console);const{fromEntries:c,keys:u}=Object,d=e=>[e,l[e]],f=e=>t=>[t,function(n){e[t]=n}],m=(e,t)=>c(u(e).map(t));const p=!(typeof window>"u"||"function"!=typeof window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches,h=p?"color: #A9C7FB;":"color: #135CD2;",g=p?"color: #E3E3E3;":"color: #1F1F1F;",y="5.5.0",b="iframeResizer",v=10,z="data-iframe-size",w="data-iframe-overflowed",$="data-iframe-ignore",S="bottom",O="right",M="autoResizeEnabled",E=Symbol("sizeChanged"),j="manualResize",k={},T="setOffsetSize",x="resizeObserver",A="overflowObserver",I="mutationObserver",C="visibilityObserver",P="none",N="init",R=(e,t,n,o)=>e.addEventListener(t,n,o||!1),B=(e,t,n)=>e.removeEventListener(t,n,!1),q=e=>{if(!e)return"";let t=-559038744,n=1103547984;for(let o,r=0;r<e.length;r++)o=e.codePointAt(r),t=Math.imul(t^o,2246822519),n=Math.imul(n^o,3266489917);return t^=Math.imul(t^n>>>15,1935289751),n^=Math.imul(n^t>>>15,3405138345),t^=n>>>16,n^=t>>>16,(2097152*(n>>>0)+(t>>>11)).toString(36)},L=e=>e.replace(/[A-Za-z]/g,e=>String.fromCodePoint((e<="Z"?90:122)>=(e=e.codePointAt(0)+19)?e:e-26)),W=["spjluzl","rlf","clyzpvu"],F=["<yi>Puchspk Spjluzl Rlf</><iy><iy>","<yi>Tpzzpun Spjluzl Rlf</><iy><iy>","Aopz spiyhyf pz hchpshisl dpao ivao Jvttlyjphs huk Vwlu-Zvbyjl spjluzlz.<iy><iy><i>Jvttlyjphs Spjluzl</><iy>Mvy jvttlyjphs bzl, <p>pmyhtl-ylzpgly</> ylxbpylz h svd jvza vul aptl spjluzl mll. Mvy tvyl pumvythapvu cpzpa <b>oaawz://pmyhtl-ylzpgly.jvt/wypjpun</>.<iy><iy><i>Vwlu Zvbyjl Spjluzl</><iy>Pm fvb hyl bzpun aopz spiyhyf pu h uvu-jvttlyjphs vwlu zvbyjl wyvqlja aolu fvb jhu bzl pa mvy myll bukly aol alytz vm aol NWS C3 Spjluzl. Av jvumpyt fvb hjjlwa aolzl alytz, wslhzl zla aol <i>spjluzl</> rlf pu <p>pmyhtl-ylzpgly</> vwapvuz av <i>NWSc3</>.<iy><iy>Mvy tvyl pumvythapvu wslhzl zll: <b>oaawz://pmyhtl-ylzpgly.jvt/nws</>","<i>NWSc3 Spjluzl Clyzpvu</><iy><iy>Aopz clyzpvu vm <p>pmyhtl-ylzpgly</> pz ilpun bzlk bukly aol alytz vm aol <i>NWS C3</> spjluzl. Aopz spjluzl hssvdz fvb av bzl <p>pmyhtl-ylzpgly</> pu Vwlu Zvbyjl wyvqljaz, iba pa ylxbpylz fvby wyvqlja av il wbispj, wyvcpkl haaypibapvu huk il spjluzlk bukly clyzpvu 3 vy shaly vm aol NUB Nlulyhs Wbispj Spjluzl.<iy><iy>Pm fvb hyl bzpun aopz spiyhyf pu h uvu-vwlu zvbyjl wyvqlja vy dlizpal, fvb dpss ullk av wbyjohzl h svd jvza vul aptl jvttlyjphs spjluzl.<iy><iy>Mvy tvyl pumvythapvu cpzpa <b>oaawz://pmyhtl-ylzpgly.jvt/wypjpun</>.","<iy><yi>Zvsv spjluzl kvlz uva zbwwvya jyvzz-kvthpu</><iy><iy>Av bzl <p>pmyhtl-ylzpgly</> dpao jyvzz kvthpu pmyhtlz fvb ullk lpaoly aol Wyvmlzzpvuhs vy Ibzpulzz spjluzlz. Mvy klahpsz vu bwnyhkl wypjpun wslhzl jvuahja pumv@pmyhtl-ylzpgly.jvt."],D=["NWSc3","zvsv","wyv","ibzpulzz","vlt"],H=Object.fromEntries(["2cgs7fdf4xb","1c9ctcccr4z","1q2pc4eebgb","ueokt0969w","w2zxchhgqz","1umuxblj2e5"].map((e,t)=>[e,Math.max(0,t-1)])),V=e=>L(F[e]);var U=e=>{const t=e[L(W[0])]||e[L(W[1])]||e[L(W[2])];if(!t)return-1;const n=t.split("-");let o=function(e=""){let t=-2;const n=q(L(e));return n in H&&(t=H[n]),t}(n[0]);return 0===o||(e=>e[2]===q(e[0]+e[1]))(n)||(o=-2),o};const Z=(e,...t)=>setTimeout(()=>e(...t),0),J=e=>{let t=!1;return function(){return t?void 0:(t=!0,Reflect.apply(e,this,arguments))}},Q=e=>e,_=e=>Math.round(1e3*e)/1e3,G=e=>e.charAt(0).toUpperCase()+e.slice(1),Y=e=>""!=`${e}`&&void 0!==e;const X=(e,t,n)=>{if(typeof e!==t)throw new TypeError(`${n} is not a ${G(t)}`)};let K=!0,ee=b;const te=(ne=function(n={}){const c={},u={},p=[],h={...a,expand:!n.collapsed||a.expanded,...n};let g="";function y(){p.length=0,g=""}function b(){delete h.event,y()}const v=()=>!!p.some(([e])=>e in i)||!!h.expand;function z(){if(0!==p.length){l[v()?"group":"groupCollapsed"](`%c${h.label}%c ${(e=>{const t=e.event||e.defaultEvent;return t?`${t}`:""})(h)} %c${h.showTime?g:""}`,e,t,o);for(const[e,...t]of p)l.assert(e in l,`Unknown console method: ${e}`),e in l&&l[e](...t);l.groupEnd(),b()}else b()}function w(){""===g&&(g=function(){const e=new Date,t=(t,n)=>e[t]().toString().padStart(n,"0");return`@ ${t("getHours",2)}:${t("getMinutes",2)}:${t("getSeconds",2)}.${t("getMilliseconds",3)}`}())}function $(e,...t){0===p.length&&(w(),queueMicrotask(()=>queueMicrotask(z))),p.push([e,...t])}function S(e=r,...t){c[e]?$("log",`${e}: ${performance.now()-c[e]} ms`,...t):$("timeLog",e,...t)}return{...m(h,f(h)),...m(console,e=>[e,(...t)=>$(e,...t)]),...m(s,d),assert:function(e,...t){!0!==e&&$("assert",e,...t)},count:function(e=r){u[e]?u[e]+=1:u[e]=1,$("log",`${e}: ${u[e]}`)},countReset:function(e=r){delete u[e]},endAutoGroup:z,errorBoundary:e=>(...t)=>{let n;try{n=e(...t)}catch(e){if(!Error.prototype.isPrototypeOf(e))throw e;$("error",e),z()}return n},event:function(e){w(),h.event=e},purge:y,time:function(e=r){w(),c[e]=performance.now()},timeEnd:function(e=r){S(e),delete c[e]},timeLog:S,touch:w}},ne?.__esModule?ne.default:ne);var ne;const oe=te({label:`${b}(child)`});var re;const ie=(re="log",(...e)=>!K||oe[re](...e));const{assert:ae,debug:se,endAutoGroup:le,error:ce,errorBoundary:ue,event:de,label:fe,purge:me,warn:pe}=oe,he=e=>{return oe.warn((t=Q,e=>window.chrome?t(e.replaceAll("<br>","\n").replaceAll("<rb>","[31;1m").replaceAll("</>","[m").replaceAll("<b>","[1m").replaceAll("<i>","[3m").replaceAll("<u>","[4m")):t(e.replaceAll("<br>","\n").replaceAll(/<[/a-z]+>/gi,"")))(e));var t},ge=he,ye=(e=>(t,n="renamed to")=>(o,r,i="",a="")=>e(a,`<rb>Deprecated ${t}(${o.replace("()","")})</>\n\nThe <b>${o}</> ${t.toLowerCase()} has been ${n} <b>${r}</>. ${i}Use of the old ${t.toLowerCase()} will be removed in a future version of <i>iframe-resizer</>.`))((e,t)=>he(t)),be=ye("Method"),ve=ye("Method","replaced with"),ze=ye("Option"),we=["min-height","min-width","max-height","max-width"],$e=new Set,Se=(e,t)=>window.getComputedStyle(e).getPropertyValue(t),Oe=(e,t)=>{return(n=Se(e,t))&&"0px"!==n&&"auto"!==n&&"none"!==n;var n};function Me({href:e}){$e.has(e)||$e.add(e)}const Ee=(e,t)=>function(e,t){const n=e.style[t];return n?{source:"an inline style attribute",value:n}:null}(e,t)||function(e,t){for(const n of document.styleSheets)try{for(const o of n.cssRules||[])if(o.selectorText&&e.matches(o.selectorText)){const e=o.style[t];if(e)return{source:"STYLE"===n.ownerNode.tagName?"an inline <style> block":`stylesheet (${n.href})`,value:e}}}catch(e){Me(n)}return{source:"cross-origin stylesheet",value:Se(e,t)}}(e,t),je=(e,t)=>{const{source:n,value:o}=Ee(e,t),r=(e=>e.tagName?e.tagName.toLowerCase():"unknown")(e);he(`The <b>${t}</> CSS property is set to <b>${o}</> on the <b><${r}></> element via ${n}. This may cause issues with the correct operation of <i>iframe-resizer</>.\n\nIf you wish to restrict the size of the iframe, then you should set this property on the iframe element itself, not the content inside it.`)};function ke(){for(const e of[document.documentElement,document.body])for(const t of we)Oe(e,t)&&je(e,t)}const Te=e=>t=>void 0===t?void 0:e(t),xe=Te(e=>"true"===e),Ae=Te(Number),Ie=new Set,Ce=new Set,Pe=[];let Ne,Re=1,Be=!1,qe=0;const Le=e=>{for(const t of e){const{addedNodes:e,removedNodes:n}=t;for(const t of e)Ie.add(t);for(const e of n)Ie.has(e)?Ie.delete(e):Ce.add(e)}};function We(e){Pe.push(e),Be||(qe=performance.now(),Be=!0,requestAnimationFrame(Ne))}function Fe(e){const t=new window.MutationObserver(We),n=document.querySelector("body"),o={attributes:!0,attributeFilter:[$,z],attributeOldValue:!1,characterData:!1,characterDataOldValue:!1,childList:!0,subtree:!0};return Ne=(e=>()=>{const t=performance.now(),n=t-qe,o=16*Re+++2;if(n>o&&n<200)return de("MutationDelay"),ie("Update delayed due to heavy workload on the callStack"),ie(`EventLoop busy time: %c${_(n)}ms %c> Max wait: %c${o-2}ms`,h,g,h),setTimeout(Ne,16*Re),void(qe=t);Re=1,Pe.forEach(Le),Pe.length=0,e({addedMutations:Ie,removedMutations:Ce}),Be=!1,Ie.clear(),Ce.clear()})(e),t.observe(n,o),ie("Attached MutationObserver to body"),t}const De=(t,n=!0)=>o=>{o>0&&ie(`${n?"At":"De"}tached ${t}Observer ${n?"to":"from"} %c${o}%c element${1===o?"":"s"}`,h,e)},He=(e,t,n)=>e=>{let o=0;for(const r of e)n.has(r)&&(t.unobserve(r),n.delete(r),o+=1);return o},Ve=e=>e.hidden||null===e.offsetParent||"none"===e.style.display,Ue=(e,t)=>{const n=t.side,o={root:t.root,rootMargin:"0px",threshold:1},r=window?.requestAnimationFrame||Q,i=(t=!1)=>e(t),a=(e,t)=>0===e||e>t[n],s=(e,t)=>e.toggleAttribute(w,t);const l=new IntersectionObserver(function(e){for(const t of e){const{boundingClientRect:e,rootBounds:o,target:r}=t,i=e[n],l=a(i,o)&&!Ve(r);s(r,l)}r(i)},o),c=new WeakSet;return{attachObservers:function(e){let t=0;for(const n of e){const e=n.nodeType===Node.ELEMENT_NODE,o=c.has(n);e&&(ae(!o,"Node already observed for overflow",n),o||(l.observe(n),c.add(n),t+=1))}return t},detachObservers:He(0,l,c)}},Ze="--ifr-start",Je="--ifr-end",Qe=[],_e=new WeakSet,Ge=e=>"object"==typeof e&&_e.add(e);let Ye={},Xe=0;function Ke(e){e.getEntries().forEach(e=>{if(e.name===Je){const{duration:t}=performance.measure("--ifr-measure",Ze,Je);Ye=e.detail,Qe.push(t),Qe.length>100&&Qe.shift()}})}function et(){ie("Attached PerformanceObserver to page");new PerformanceObserver(Ke).observe({entryTypes:["mark"]}),Ge(document.documentElement),Ge(document.body),function(){const e=setInterval(()=>{if(Qe.length<10)return;if(Ye.hasTags&&Ye.len<25)return;Qe.sort();const t=Math.min(Qe.reduce((e,t)=>e+t,0)/Qe.length,Qe[Math.floor(Qe.length/2)]),n=_(t);n>Xe&&(Xe=n,de("performanceObserver")),t<=4||(clearInterval(e),he(`<rb>Performance Warning</>\n\nCalculating the page size is taking an excessive amount of time (${_(t)}ms).\n\nTo improve performance add the <b>data-iframe-size</> attribute to the ${Ye.Side.toLowerCase()} most element on the page. For more details see: <u>https://iframe-resizer.com/perf</>.`))},5e3)}()}const tt=De("Resize"),nt=new WeakSet;let ot;function rt(e){let t=0;for(const n of e){const e=n.nodeType===Node.ELEMENT_NODE,o=nt.has(n);if(!e)continue;const r=getComputedStyle(n)?.position;""!==r&&"static"!==r&&(ae(!o,"Node already observed for resize",n),o||(ot.observe(n),nt.add(n),t+=1))}tt(t)}const it=e=>(t,n)=>{if(n in t){if(typeof t[n]===e)return t[n];throw new TypeError(`${n} is not a ${e}.`)}},at=it("function"),st=it("number"),lt=it("string");"undefined"!=typeof window&&function(){const o={height:()=>(pe("Custom height calculation function not defined"),Ft.auto()),width:()=>(pe("Custom width calculation function not defined"),Dt.auto())},r={},i={},a="auto",s="[iFrameSizer]",l="scroll";let c,u,d,f,m,p,q,F,H,Q=!0,_="",te=0,ne="",re="",ae=!1,se=!0,ce=!1,ye=!0,we=!1,$e=!1,Se=!1,Oe=1,Me=a,Ee="",je=!0,Te={},Ie=!1,Ce=!0,Pe=!1,Ne=0,Re=!1,Be=[],qe="",Le="child",We=!1,Ve="",Qe=[],_e=window.parent,Ge="*",Ye=0,Xe=!1,Ke=1,tt=l,it=window,ct=()=>{pe("onMessage function not defined")},ut=()=>{},dt=null,ft=null;function mt(t){var n,r,i;!function(e){qe=e[0]??qe,te=Ae(e[1])??te,ce=xe(e[2])??ce,Pe=xe(e[3])??Pe,Q=xe(e[6])??Q,ne=e[7]??ne,Me=e[8]??Me,_=e[9]??_,re=e[10]??re,Ye=Ae(e[11])??Ye,Te.enable=xe(e[12])??!1,Le=e[13]??Le,tt=e[14]??tt,Re=xe(e[15])??Re,d=Ae(e[16])??d,f=Ae(e[17])??f,se=xe(e[18])??se,c=e[19]??c,F=e[20]??F,Ne=Ae(e[21])??Ne,Ce=xe(e[23])??Ce}(t),ee=(n={id:qe,enabled:Pe,expand:Ce}).id||b,oe.label(`${ee}`),oe.expand(n.expand),K=n.enabled,function(){function e(e){H=at(e,"onBeforeResize")??H,ct=at(e,"onMessage")??ct,ut=at(e,"onReady")??ut,"number"==typeof e?.offset&&(ze("offset","offsetSize"),se&&(d=st(e,"offset")??d),ce&&(f=st(e,"offset")??f)),"number"==typeof e?.offsetSize&&(se&&(d=st(e,"offsetSize")??d),ce&&(f=st(e,"offsetSize")??f)),u=lt(e,L(W[0]))??u,Ee=lt(e,"ignoreSelector")??Ee,Ve=lt(e,"sizeSelector")??Ve,Ge=lt(e,"targetOrigin")??Ge,Me=e?.heightCalculationMethod||Me,tt=e?.widthCalculationMethod||tt}function t(e,t){return"function"==typeof e&&(he(`<rb>Deprecated Option(${t}CalculationMethod)</>\n\nThe use of <b>${t}CalculationMethod</> as a function is deprecated and will be removed in a future version of <i>iframe-resizer</>. Please use the new <b>onBeforeResize</> event handler instead.\n\nSee <u>https://iframe-resizer.com/api/child</> for more details.`),o[t]=e,e="custom"),e}if(1===Ne)return;const n=window.iframeResizer||window.iFrameResizer;"object"==typeof n&&(e(n),Me=t(Me,"height"),tt=t(tt,"width"),ie(`Set targetOrigin for parent: %c${Ge}`,h))}(),zt(),function(){try{We=1===Ne||"iframeParentListener"in window.parent}catch(e){}}(),ce===se&&(ae=!0),function(){const t=Ne,n=U({key:c}),o=U({key:u});if(Ne=Math.max(n,o),Ne<0){if(Ne=Math.min(n,o),me(),he(`${V(Ne+2)}${V(2)}`),Y(F))throw V(Ne+2).replace(/<\/?[a-z][^>]*>|<\/>/gi,"")}else(!Y(F)||t>-1&&Ne>t)&&(sessionStorage.getItem("ifr")!==y&&function(t,n){console.info(`${ee} %ciframe-resizer ${t}`,K||n<1?"font-weight: bold;":e)}(`v${y} (${(e=>L(D[e]))(Ne)})`,Ne),Ne<2&&ge(V(3)),sessionStorage.setItem("ifr",y))}(),F&&""!==F&&"false"!==F?F!==y&&he(`<b>Version mismatch</>\n\nThe parent and child pages are running different versions of <i>iframe resizer</>.\n\nParent page: ${F} - Child page: ${y}.\n`):he("<rb>Legacy version detected on parent page</>\n\nDetected legacy version of parent page script. It is recommended to update the parent page to use <b>@iframe-resizer/parent</>.\n\nSee <u>https://iframe-resizer.com/setup/</> for more details.\n"),St(),Ot(),function(){let e=!1;const t=t=>document.querySelectorAll(`[${t}]`).forEach(n=>{e=!0,n.removeAttribute(t),n.toggleAttribute(z,!0)});t("data-iframe-height"),t("data-iframe-width"),e&&he("<rb>Deprecated Attributes</>\n          \nThe <b>data-iframe-height</> and <b>data-iframe-width</> attributes have been deprecated and replaced with the single <b>data-iframe-size</> attribute. Use of the old attributes will be removed in a future version of <i>iframe-resizer</>.")}(),"BackCompat"===document.compatMode&&he("<rb>Quirks Mode Detected</>\n\nThis iframe is running in the browser's legacy <b>Quirks Mode</>, this may cause issues with the correct operation of <i>iframe-resizer</>. It is recommended that you switch to the modern <b>Standards Mode</>.\n\nFor more information see <u>https://iframe-resizer.com/quirks-mode</>.\n"),ht(),ae||ke(),1!==Ne&&(it.parentIframe=Object.freeze({autoResize:e=>(X(e,"boolean","parentIframe.autoResize(enable) enable"),!1===ce&&!1===se?(de(M),he(`Auto Resize can not be changed when <b>direction</> is set to '${P}'.`),!1):(!0===e&&!1===Q?(Q=!0,queueMicrotask(()=>Qt(M,"Auto Resize enabled"))):!1===e&&!0===Q&&(Q=!1),Gt(0,0,"autoResize",JSON.stringify(Q)),Q)),close(){Gt(0,0,"close")},getId:()=>qe,getOrigin:()=>(be("getOrigin()","getParentOrigin()"),m),getParentOrigin:()=>m,getPageInfo(e){if("function"==typeof e)return dt=e,Gt(0,0,"pageInfo"),void ve("getPageInfo()","getParentProps()","See <u>https://iframe-resizer.com/upgrade</> for details. ");dt=null,Gt(0,0,"pageInfoStop")},getParentProps:e=>(X(e,"function","parentIframe.getParentProps(callback) callback"),ft=e,Gt(0,0,"parentInfo"),()=>{ft=null,Gt(0,0,"parentInfoStop")}),getParentProperties(e){be("getParentProperties()","getParentProps()"),this.getParentProps(e)},moveToAnchor(e){X(e,"string","parentIframe.moveToAnchor(anchor) anchor"),Te.findTarget(e)},reset(){!function(){const e=Me;Me=a,Xe||(Xe=!0,requestAnimationFrame(()=>{Xe=!1})),_t("reset"),Me=e}()},setOffsetSize(e){X(e,"number","parentIframe.setOffsetSize(offset) offset"),d=e,f=e,Qt(T,`parentIframe.setOffsetSize(${e})`)},scrollBy(e,t){X(e,"number","parentIframe.scrollBy(x, y) x"),X(t,"number","parentIframe.scrollBy(x, y) y"),Gt(t,e,"scrollBy")},scrollTo(e,t){X(e,"number","parentIframe.scrollTo(x, y) x"),X(t,"number","parentIframe.scrollTo(x, y) y"),Gt(t,e,"scrollTo")},scrollToOffset(e,t){X(e,"number","parentIframe.scrollToOffset(x, y) x"),X(t,"number","parentIframe.scrollToOffset(x, y) y"),Gt(t,e,"scrollToOffset")},sendMessage(e,t){t&&X(t,"string","parentIframe.sendMessage(msg, targetOrigin) targetOrigin"),Gt(0,0,"message",JSON.stringify(e),t)},setHeightCalculationMethod(e){Me=e,St()},setWidthCalculationMethod(e){tt=e,Ot()},setTargetOrigin(e){X(e,"string","parentIframe.setTargetOrigin(targetOrigin) targetOrigin"),Ge=e},resize(e,t){e&&X(e,"number","parentIframe.resize(customHeight, customWidth) customHeight"),t&&X(t,"number","parentIframe.resize(customHeight, customWidth) customWidth"),Qt(j,`parentIframe.resize(${e||""}${t?`,${t}`:""})`,e,t)},size(e,t){be("size()","resize()"),this.resize(e,t)}}),it.parentIFrame=it.parentIframe),function(){function e(e){Gt(0,0,e.type,`${e.screenY}:${e.screenX}`)}function t(t,n){R(window.document,t,e)}!0===Re&&(t("mouseenter"),t("mouseleave"))}(),Te=function(){const e=()=>({x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop});function t(t){const n=t.getBoundingClientRect(),o=e();return{x:parseInt(n.left,v)+parseInt(o.x,v),y:parseInt(n.top,v)+parseInt(o.y,v)}}function n(e){function n(e){const n=t(e);Gt(n.y,n.x,"scrollToOffset")}const o=e.split("#")[1]||e,r=decodeURIComponent(o),i=document.getElementById(r)||document.getElementsByName(r)[0];void 0===i?Gt(0,0,"inPageLink",`#${o}`):n(i)}function o(){const{hash:e,href:t}=window.location;""!==e&&"#"!==e&&n(t)}function r(){for(const e of document.querySelectorAll('a[href^="#"]'))"#"!==e.getAttribute("href")&&R(e,"click",t=>{t.preventDefault(),n(e.getAttribute("href"))})}function i(){R(window,"hashchange",o)}function a(){setTimeout(o,128)}function s(){r(),i(),a()}return Te.enable&&(1===Ne?he("In page linking requires a Professional or Business license. Please see <u>https://iframe-resizer.com/pricing</> for more details."):s()),{findTarget:n}}(),void 0===ne&&(ne=`${te}px`),bt("margin",(r="margin",(i=ne).includes("-")&&(pe(`Negative CSS value ignored for ${r}`),i=""),i)),bt("background",_),bt("padding",re),function(){const e=document.createElement("div");e.style.clear="both",e.style.display="block",e.style.height="0",document.body.append(e)}(),ae||function(){const e=e=>e.style.setProperty("height","auto","important");e(document.documentElement),e(document.body)}(),function(e){wt({method:e,eventType:"After Print",eventName:"afterprint"}),wt({method:e,eventType:"Before Print",eventName:"beforeprint"}),wt({method:e,eventType:"Ready State Change",eventName:"readystatechange"})}("add"),function(){const e=Rt(document)();Fe(Ct),function(e){const t={root:document.documentElement,side:se?S:O};p=Ue(Et,t),p.attachObservers(e)}(e),et(),function(e){ot=new ResizeObserver(jt),ot.observe(document.body),nt.add(document.body),ie("Attached ResizeObserver to body"),q={attachObserverToNonStaticElements:rt,detachObservers:He(0,ot,nt)},q.attachObserverToNonStaticElements(e)}(e),function(e){const t=new IntersectionObserver(t=>e(t[0].isIntersecting),{threshold:0}),n=document.documentElement;t.observe(n),ie("Attached VisibilityObserver to page")}(kt)}(),pt(J(ut)),Qt(N,"Init message from host page",void 0,void 0,`${y}:${Ne}`),document.title&&""!==document.title&&Gt(0,0,"title",document.title)}function pt(e){"complete"===document.readyState?Z(e):R(document,"readystatechange",()=>pt(e))}function ht(){Qe=document.querySelectorAll(`[${z}]`),Se=Qe.length>0}let gt=0;function yt(){const n=document.querySelectorAll(`*[${$}]`);we=n.length>0,we&&n.length!==gt&&(function(n){const o=1===n.length?"":"s";pe(`%c[${$}]%c found on %c${n.length}%c element${o}`,t,e,t,e)}(n),gt=n.length)}function bt(e,t){void 0!==t&&""!==t&&"null"!==t&&(document.body.style.setProperty(e,t),ie(`Set body ${e}: %c${t}`,h))}function vt(e,t,n){if(""!==n)for(const e of document.querySelectorAll(n))e.toggleAttribute(t,!0)}function zt(){vt(0,z,Ve),vt(0,$,Ee)}function wt(e){({add(t){function n(){Qt(e.eventName,e.eventType)}i[t]=n,R(window,t,n,{passive:!0})},remove(e){const t=i[e];delete i[e],B(window,e,t)}})[e.method](e.eventName)}function $t(e,t,n,o){return t!==e&&(e in n||(pe(`${e} is not a valid option for ${o}CalculationMethod.`),e=t),e in r)&&he(`<rb>Deprecated ${o}CalculationMethod (${e})</>\n\nThis version of <i>iframe-resizer</> can auto detect the most suitable ${o} calculation method. It is recommended that you ${F?"remove this option.":"set this option to <b>'auto'</> when using an older version of <i>iframe-resizer</> on the parent page."}`),e}function St(){Me=$t(Me,a,Ft,"height")}function Ot(){tt=$t(tt,l,Dt,"width")}function Mt(){const e=document.querySelectorAll(`[${w}]`);Be=Array.from(e).filter(e=>!e.closest(`[${$}]`)),$e=Be.length>0}function Et(e){Mt(),($e||e)&&(Be.length>1?ie("Overflowed Elements:",...Be):$e||ie("Overflow removed"),Qt(A,"Overflow updated"))}function jt(e){if(!Array.isArray(e)||0===e.length)return;const t=e[0].target;Qt(x,`Element resized <${function(e){switch(!0){case!Y(e):return"";case Y(e.id):return`${e.nodeName}#${e.id}`;case Y(e.name):return`${e.nodeName} (${e.name}`;case Y(e.className):return`${e.nodeName}.${e.className}`;default:return e.nodeName}}(t)}>`)}function kt(e){Ie=!e,Qt(C,"Visibility changed")}const Tt=De("Overflow"),xt=De("Overflow",!1),At=De("Resize"),It=De("Resize",!1);function Ct(e){!function({addedMutations:e,removedMutations:t}){de("contentMutated"),zt(),ht(),Mt();let n=0,o=0,r=0,i=0;for(const e of t){const t=Rt(e)();o+=p.detachObservers(t),i+=q.detachObservers(t)}for(const t of e){const e=Rt(t)();n+=p.attachObservers(e),r+=q.attachObserverToNonStaticElements(e)}xt(o),It(i),Tt(n),At(r),le()}(e),Qt(I,"Mutation Observed")}function Pt(e){performance.mark(Ze);const t=G(e);let n=0,o=document.documentElement,r=Se?0:document.documentElement.getBoundingClientRect().bottom;const i=Se?Qe:$e?Be:Rt(document)();for(const t of i)n=t.getBoundingClientRect()[e]+parseFloat(getComputedStyle(t).getPropertyValue(`margin-${e}`)),n>r&&(r=n,o=t);return ie(`${t} position calculated from:`,o),performance.mark(Je,{detail:{hasTags:Se,len:i.length,logging:Pe,Side:t}}),r}const Nt=e=>[e.bodyOffset(),e.bodyScroll(),e.documentElementOffset(),e.documentElementScroll(),e.boundingClientRect()],Rt=e=>()=>{const t=["* ","not(head)","not(meta)","not(base)","not(title)","not(script)","not(link)","not(style)","not(map)","not(area)","not(option)","not(optgroup)","not(template)","not(track)","not(wbr)","not(nobr)"];return yt(),we&&t.push(`not([${$}])`,`not([${$}] *)`),[e,...e.querySelectorAll(t.join(":"))]},Bt={height:0,width:0},qt={height:0,width:0},Lt=[h,g,h];function Wt(e){function t(){return qt[o]=r,Bt[o]=s,r}const n=e===Ft,o=n?"height":"width",r=e.boundingClientRect(),i=Math.ceil(r),a=Math.floor(r),s=(e=>e.documentElementScroll()+Math.max(0,e.getOffset()))(e),l=`HTML: %c${r}px %cPage: %c${s}px`;let c=0;switch(!0){case!e.enabled():return s;case Se:ie("Found element with data-iframe-size attribute"),c=e.taggedElement();break;case!$e&&0===qt[o]&&0===Bt[o]:ie(`Initial page size values: ${l}`,...Lt),c=t();break;case Xe&&r===qt[o]&&s===Bt[o]:ie(`Size unchanged: ${l}`,...Lt),c=Math.max(r,s);break;case 0===r:ie(`Page is hidden: ${l}`,...Lt),c=s;break;case!$e&&r!==qt[o]&&s<=Bt[o]:ie(`New <html> size: ${l} `,...Lt),ie(`Previous <html> size: %c${qt[o]}px`,h),c=t();break;case!n:c=e.taggedElement();break;case!$e&&r<qt[o]:ie(`<html> size decreased: ${l}`,...Lt),c=t();break;case s===a||s===i:ie(`<html> size equals page size: ${l}`,...Lt),c=t();break;case r>s:ie(`Page size < <html> size: ${l}`,...Lt),c=t();break;case $e:ie("Found element overflowing <html> "),c=e.taggedElement();break;default:ie(`Using <html> size: ${l}`,...Lt),c=t()}return ie(`Content ${o}: %c${c}px`,h),c+=function(e){const t=e.getOffset();return 0!==t&&ie(`Page offsetSize: %c${t}px`,h),t}(e),c}const Ft={enabled:()=>se,getOffset:()=>d,auto:()=>Wt(Ft),bodyOffset:()=>{const{body:e}=document,t=getComputedStyle(e);return e.offsetHeight+parseInt(t.marginTop,v)+parseInt(t.marginBottom,v)},bodyScroll:()=>document.body.scrollHeight,offset:()=>Ft.bodyOffset(),custom:()=>o.height(),documentElementOffset:()=>document.documentElement.offsetHeight,documentElementScroll:()=>document.documentElement.scrollHeight,boundingClientRect:()=>Math.max(document.documentElement.getBoundingClientRect().bottom,document.body.getBoundingClientRect().bottom),max:()=>Math.max(...Nt(Ft)),min:()=>Math.min(...Nt(Ft)),grow:()=>Ft.max(),lowestElement:()=>Pt(S),taggedElement:()=>Pt(S)},Dt={enabled:()=>ce,getOffset:()=>f,auto:()=>Wt(Dt),bodyScroll:()=>document.body.scrollWidth,bodyOffset:()=>document.body.offsetWidth,custom:()=>o.width(),documentElementScroll:()=>document.documentElement.scrollWidth,documentElementOffset:()=>document.documentElement.offsetWidth,boundingClientRect:()=>Math.max(document.documentElement.getBoundingClientRect().right,document.body.getBoundingClientRect().right),max:()=>Math.max(...Nt(Dt)),min:()=>Math.min(...Nt(Dt)),rightMostElement:()=>Pt(O),scroll:()=>Math.max(Dt.bodyScroll(),Dt.documentElementScroll()),taggedElement:()=>Pt(O)},Ht=(e,t)=>!(Math.abs(e-t)<=Ye);function Vt(e,t){const n=e[t]();return e.enabled()&&void 0!==H?function(e){const t=H(e);if(void 0===t)throw new TypeError("No value returned from onBeforeResize(), expected a numeric value");if(Number.isNaN(t))throw new TypeError(`Invalid value returned from onBeforeResize(): ${t}, expected Number`);return t}(n):n}let Ut=!1;const Zt=J(()=>ge(V(4)));let Jt=!1;const Qt=ue((e,t,n,o,r)=>{if(performance.now(),de(e),!0!==Ut){if(!Q&&!(e in k))return ie("Resizing disabled"),void le();if(Ie){if(!0===Jt)return;Jt=!0}else Jt=!1,Ut=!0,requestAnimationFrame(()=>{Ut=!1}),function(e,t,n,o,r){const i=n??Vt(Ft,Me),a=o??Vt(Dt,tt);switch(se&&Ht(Oe,i)||ce&&Ht(Ke,a)?E:e){case N:case M:case E:Oe=i,Ke=a;case T:Gt(Oe,Ke,e,r);break;case A:case I:case x:case C:me();break;default:me(),ie("No change in content size detected")}}(e,0,n,o,r)}});function _t(e){Oe=Ft[Me](),Ke=Dt[tt](),Gt(Oe,Ke,e)}const Gt=ue(function(e,t,o,r,i){Ne<-1||(de(o),void 0!==i||(i=Ge),function(){const a=`${qe}:${e}:${t}:${o}${void 0===r?"":`:${r}`}`;if(We)try{window.parent.iframeParentListener(s+a)}catch(e){if(1!==Ne)throw e;return void Zt()}else _e.postMessage(s+a,i);ie(`Sending message to parent page via ${We?"sameOrigin":"postMessage"}: %c%c${a}`,n,h)}(),le())}),Yt=ue(function(e){de("onMessage");const{freeze:t}=Object,{parse:n}=JSON,o=e=>Gt(0,0,`${e}Stop`),r={init:function(){if("loading"===document.readyState)return;const t=e.data.slice(13).split(":");_e=e.source,m=e.origin,mt(t),ye=!1,setTimeout(()=>{je=!1},128)},reset(){je||_t("resetPage")},resize(){Qt("parentResize","Parent window requested size check")},moveToAnchor(){Te.findTarget(a())},inPageLink(){this.moveToAnchor()},pageInfo(){const e=a();dt?Z(dt,n(e)):o("pageInfo")},parentInfo(){const e=(r=a(),t(n(r)));var r;ft?Z(ft,e):o("parentInfo")},message(){const e=a();Z(ct,n(e))}},i=()=>e.data.split("]")[1].split(":")[0],a=()=>e.data.slice(e.data.indexOf(":")+1),l=()=>e.data.split(":")[2]in{true:1,false:1};function c(){const t=i();de(t),t in r?r[t]():"iframeResize"in window||void 0!==window.jQuery&&""in window.jQuery.prototype||l()||pe(`Unexpected message (${e.data})`)}s===`${e.data}`.slice(0,13)&&function(){if(!1!==ye)return l()?(fe(i()),de(N),void r.init()):void 0;c()}()});function Xt(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}function Kt(e){return Yt(e),it}"iframeChildListener"in window?pe("Already setup"):(window.iframeChildListener=e=>setTimeout(()=>Yt({data:e,sameOrigin:!0})),R(window,"message",Yt),R(window,"readystatechange",Xt),Xt());try{top?.document?.getElementById("banner")&&(it={},window.mockMsgListener=Kt,B(window,"message",Yt),define([],()=>Kt))}catch(e){}}()}();
